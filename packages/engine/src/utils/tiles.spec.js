import { findActionsOnCell, getWrappingCells } from './tiles'

const STATE = JSON.parse(
  '{"seeds":{"master":"5pQCCS3v2S","private":true,"dices":"00n0uOTwmR","dicesNext":"00n0uOTwmR@@0.27136202727290315","cards":"UqtKawdFGa","cardsNext":"UqtKawdFGa","tiles":"o1yaPxgXvm","tilesNext":"o1yaPxgXvm@@0.7096507233462004"},"tiles":{"remaining":59,"deck":[{"tile":{"id":"Pfn8vlHx1b51VsiNIyScj","name":"corner gaz tile","top":true,"right":true,"type":"gaz"},"remaining":5},{"tile":{"id":"KB6PqUfbLZ9UE4QBu-Fne","name":"allezy water tile","top":true,"bottom":true,"type":"water"},"remaining":4},{"tile":{"id":"yA-tGd1qwHzfb2VhStf2B","name":"alley tile","top":true,"bottom":true},"remaining":4},{"tile":{"id":"nzisSEndGakUiAuzfIFVF","name":"cross water tile","top":true,"right":true,"bottom":true,"left":true,"type":"water"},"remaining":2},{"tile":{"id":"yyrTb2mLi7-wsaCgTOjZF","name":"corner landslide tile 3 & 6","top":true,"right":true,"type":"landslide","dices":[3,6]},"remaining":1},{"tile":{"id":"lDAh6cMuKRibgfFqpkcza","name":"edge landslide tile 2 & 3","top":true,"right":true,"bottom":true,"type":"landslide","dices":[2,3]},"remaining":1},{"tile":{"id":"7-ieW8glNb79icRDk1K1W","name":"corner landslide tile 2 & 6","top":true,"right":true,"type":"landslide","dices":[2,6]},"remaining":1},{"tile":{"id":"r-R-BTC0H4OmyFDBPQJuT","name":"cross tile","top":true,"right":true,"bottom":true,"left":true},"remaining":2},{"tile":{"id":"iODsx23TbApGvJhFyWqMM","name":"edge water tile","top":true,"right":true,"bottom":true,"type":"water"},"remaining":1},{"tile":{"id":"vn0_eykg1uHmW0OVYokBz","name":"dead end enemy tile","top":true,"type":"enemy"},"remaining":6},{"tile":{"id":"euBLqqryDfNyrUV3eqh1D","name":"allezy tight tile","top":true,"bottom":true,"type":"tight"},"remaining":3},{"tile":{"id":"hglerRhkulhXcf09fT_qP","name":"dead end tile","top":true},"remaining":2},{"tile":{"id":"HN0w_Pav5wh_s5d2PEp_A","name":"corner tile","top":true,"right":true},"remaining":3},{"tile":{"id":"xNjLi8WCXxaBCRQvdLTas","name":"alley fall tile","top":true,"bottom":true,"type":"fall"},"remaining":3},{"tile":{"id":"2CTuGVylqs7ejWFoLHsiw","name":"edge landslide tile 1 & 6","top":true,"right":true,"bottom":true,"type":"landslide","dices":[1,6]},"remaining":1},{"tile":{"id":"EfssmBj1Gg0i3zAKKlSGQ","name":"alley block tile","top":true,"bottom":true,"type":"block"},"remaining":3},{"tile":{"id":"I-NRDVCDl7CSP7fV5FxDY","name":"edge tile","top":true,"right":true,"bottom":true},"remaining":3},{"tile":{"id":"GL3wvjvDRUNq13upLe29u","name":"cross damage tile","top":true,"right":true,"bottom":true,"left":true,"type":"damage"},"remaining":2},{"tile":{"id":"45-EbI8thaUszH0kxRvxz","name":"alley gaz tile","top":true,"bottom":true,"type":"gaz"},"remaining":1},{"tile":{"id":"S7Z47I_FFW-ZSumM8aiJ5","name":"edge gaz tile","top":true,"right":true,"bottom":true,"type":"gaz"},"remaining":1},{"tile":{"id":"8d2V4rOPI-kIkAx5s583p","name":"edge landslide tile 3 & 5","top":true,"right":true,"bottom":true,"type":"landslide","dices":[3,5]},"remaining":1},{"tile":{"id":"AeEQazY4QCBBb3Kt_yQuU","name":"edge landslide tile 4 & 5","top":true,"right":true,"bottom":true,"type":"landslide","dices":[4,5]},"remaining":1},{"tile":{"id":"aYbJvk_Vrwx0OFFMBmn22","name":"edge landslide tile 1 & 3","top":true,"right":true,"bottom":true,"type":"landslide","dices":[1,3]},"remaining":1},{"tile":{"id":"HwfQuoy7wU70-8cXVzqN9","name":"corner landslide tile 1 & 2","top":true,"right":true,"type":"landslide","dices":[1,2]},"remaining":1},{"tile":{"id":"7LxK3CZ1NHamA7-N3LodL","name":"edge landslide tile 4 & 6","top":true,"right":true,"bottom":true,"type":"landslide","dices":[4,6]},"remaining":1},{"tile":{"id":"9EnpHW_Gd2I7y_OLVrcCy","name":"edge landslide tile 2 & 5","top":true,"right":true,"bottom":true,"type":"landslide","dices":[2,5]},"remaining":2},{"tile":{"id":"L0nblDzgW3Q4P6-zffoqG","name":"corner landslide tile 1 & 5","top":true,"right":true,"type":"landslide","dices":[1,5]},"remaining":1},{"tile":{"id":"_wbDKHo0T69uSO1qclmqj","name":"corner enemy tile","top":true,"right":true,"type":"enemy"},"remaining":2}]},"cards":{"remaining":30,"deck":[{"card":{"type":"gaz","damage":2,"duration":1,"name":"gaz","id":"3KNfiVS61yBJ2lE26OR0N"},"remaining":4},{"card":{"type":"enemy","damage":3,"duration":1,"name":"horror","id":"Xk0FDZpwRm2re3Uox5Qg4"},"remaining":4},{"card":{"type":"landslide","damage":3,"duration":1,"name":"landslide","id":"XQeHmlrBzuZTpt2SXvVZe"},"remaining":5},{"card":{"type":"shake","damage":1,"duration":1,"name":"shake","id":"1sKrNtKjjrYkrSDdmWkYy"},"remaining":7},{"card":{"type":"water","damage":2,"duration":1,"name":"water","id":"jVjrsEynaxHyQ0o2bn3F5"},"remaining":5},{"card":{"type":"gaz","damage":2,"duration":2,"name":"gaz 2","id":"0vK8Hw4hKFPRGf76BB7Nl"},"remaining":1},{"card":{"type":"enemy","damage":3,"duration":2,"name":"horror 2","id":"RVdgxn0bohDJuePSe8Na7"},"remaining":1},{"card":{"type":"landslide","damage":3,"duration":2,"name":"landslide 2","id":"MxWpXeRkxDUK20CdwGpqD"},"remaining":1},{"card":{"type":"water","damage":2,"duration":2,"name":"water 2","id":"mQsb0CISJMDosYAl1y9bK"},"remaining":1}]},"players":[{"type":"geologist","health":3,"strength":3,"skills":[{"type":"intuition","perGame":null,"perTurn":null,"cost":0},{"type":"clear","perGame":null,"perTurn":null,"cost":1}],"archetype":{"type":"geologist","health":3,"strength":3,"skills":[{"type":"intuition","perGame":null,"perTurn":null,"cost":0},{"type":"clear","perGame":null,"perTurn":null,"cost":1}]},"name":"geologist","id":"geologist","x":1,"y":0,"actionPoints":0,"current":false,"first":true},{"type":"scoot","health":2,"strength":2,"skills":[{"type":"guide","cost":0,"perGame":3,"perTurn":null},{"type":"furtivity","cost":0,"perGame":null,"perTurn":null}],"archetype":{"type":"scoot","health":3,"strength":2,"skills":[{"type":"guide","cost":0,"perGame":3,"perTurn":null},{"type":"furtivity","cost":0,"perGame":null,"perTurn":null}]},"name":"scoot","id":"scoot","x":0,"y":1,"actionPoints":0,"current":false},{"type":"diver","health":3,"strength":1,"skills":[{"type":"dive","cost":2,"perGame":null,"perTurn":null},{"type":"amphibious","cost":0,"perGame":null,"perTurn":null}],"archetype":{"type":"diver","health":3,"strength":1,"skills":[{"type":"dive","cost":2,"perGame":null,"perTurn":null},{"type":"amphibious","cost":0,"perGame":null,"perTurn":null}]},"name":"diver","id":"diver","x":0,"y":0,"actionPoints":1,"current":true}],"enemies":[],"grid":[{"id":"QqyB-54vIKWS3s4ku7j5Y","name":"start tile","top":true,"right":true,"bottom":true,"left":true,"type":"start","x":0,"y":0,"status":[]},{"id":"r-R-BTC0H4OmyFDBPQJuT","name":"cross tile","top":true,"right":true,"bottom":true,"left":true,"x":1,"y":0,"status":[],"rotation":0},{"id":"iODsx23TbApGvJhFyWqMM","name":"edge water tile","top":true,"right":true,"bottom":true,"type":"water","x":2,"y":0,"status":[],"rotation":90},{"id":"HN0w_Pav5wh_s5d2PEp_A","name":"corner tile","top":true,"right":true,"x":0,"y":1,"status":[],"rotation":0}],"playerActions":{"possibilities":[{"type":"@players>rotate","payload":{"playerId":"diver","rotation":90,"cost":0}},{"type":"@players>drop","payload":{"playerId":"diver","cost":0}}],"excess":false,"tile":{"id":"S7Z47I_FFW-ZSumM8aiJ5","name":"edge gaz tile","top":true,"right":true,"bottom":true,"type":"gaz","x":-1,"y":0,"status":[],"rotation":0}},"technical":{"actions":[{"type":"@seeds>init","payload":{"master":"5pQCCS3v2S"}},{"type":"@cards>init","payload":{"remaining":30,"deck":[{"card":{"type":"gaz","damage":2,"duration":1,"name":"gaz","id":"3KNfiVS61yBJ2lE26OR0N"},"remaining":4},{"card":{"type":"enemy","damage":3,"duration":1,"name":"horror","id":"Xk0FDZpwRm2re3Uox5Qg4"},"remaining":4},{"card":{"type":"landslide","damage":3,"duration":1,"name":"landslide","id":"XQeHmlrBzuZTpt2SXvVZe"},"remaining":5},{"card":{"type":"shake","damage":1,"duration":1,"name":"shake","id":"1sKrNtKjjrYkrSDdmWkYy"},"remaining":7},{"card":{"type":"water","damage":2,"duration":1,"name":"water","id":"jVjrsEynaxHyQ0o2bn3F5"},"remaining":5},{"card":{"type":"gaz","damage":2,"duration":2,"name":"gaz 2","id":"0vK8Hw4hKFPRGf76BB7Nl"},"remaining":1},{"card":{"type":"enemy","damage":3,"duration":2,"name":"horror 2","id":"RVdgxn0bohDJuePSe8Na7"},"remaining":1},{"card":{"type":"landslide","damage":3,"duration":2,"name":"landslide 2","id":"MxWpXeRkxDUK20CdwGpqD"},"remaining":1},{"card":{"type":"water","damage":2,"duration":2,"name":"water 2","id":"mQsb0CISJMDosYAl1y9bK"},"remaining":1}]}},{"type":"@tiles>init","payload":{"remaining":63,"deck":[{"tile":{"id":"Pfn8vlHx1b51VsiNIyScj","name":"corner gaz tile","top":true,"right":true,"type":"gaz"},"remaining":5},{"tile":{"id":"KB6PqUfbLZ9UE4QBu-Fne","name":"allezy water tile","top":true,"bottom":true,"type":"water"},"remaining":4},{"tile":{"id":"yA-tGd1qwHzfb2VhStf2B","name":"alley tile","top":true,"bottom":true},"remaining":4},{"tile":{"id":"nzisSEndGakUiAuzfIFVF","name":"cross water tile","top":true,"right":true,"bottom":true,"left":true,"type":"water"},"remaining":2},{"tile":{"id":"yyrTb2mLi7-wsaCgTOjZF","name":"corner landslide tile 3 & 6","top":true,"right":true,"type":"landslide","dices":[3,6]},"remaining":1},{"tile":{"id":"lDAh6cMuKRibgfFqpkcza","name":"edge landslide tile 2 & 3","top":true,"right":true,"bottom":true,"type":"landslide","dices":[2,3]},"remaining":1},{"tile":{"id":"7-ieW8glNb79icRDk1K1W","name":"corner landslide tile 2 & 6","top":true,"right":true,"type":"landslide","dices":[2,6]},"remaining":1},{"tile":{"id":"r-R-BTC0H4OmyFDBPQJuT","name":"cross tile","top":true,"right":true,"bottom":true,"left":true},"remaining":3},{"tile":{"id":"iODsx23TbApGvJhFyWqMM","name":"edge water tile","top":true,"right":true,"bottom":true,"type":"water"},"remaining":2},{"tile":{"id":"vn0_eykg1uHmW0OVYokBz","name":"dead end enemy tile","top":true,"type":"enemy"},"remaining":6},{"tile":{"id":"euBLqqryDfNyrUV3eqh1D","name":"allezy tight tile","top":true,"bottom":true,"type":"tight"},"remaining":3},{"tile":{"id":"hglerRhkulhXcf09fT_qP","name":"dead end tile","top":true},"remaining":2},{"tile":{"id":"HN0w_Pav5wh_s5d2PEp_A","name":"corner tile","top":true,"right":true},"remaining":4},{"tile":{"id":"xNjLi8WCXxaBCRQvdLTas","name":"alley fall tile","top":true,"bottom":true,"type":"fall"},"remaining":3},{"tile":{"id":"2CTuGVylqs7ejWFoLHsiw","name":"edge landslide tile 1 & 6","top":true,"right":true,"bottom":true,"type":"landslide","dices":[1,6]},"remaining":1},{"tile":{"id":"EfssmBj1Gg0i3zAKKlSGQ","name":"alley block tile","top":true,"bottom":true,"type":"block"},"remaining":3},{"tile":{"id":"I-NRDVCDl7CSP7fV5FxDY","name":"edge tile","top":true,"right":true,"bottom":true},"remaining":3},{"tile":{"id":"GL3wvjvDRUNq13upLe29u","name":"cross damage tile","top":true,"right":true,"bottom":true,"left":true,"type":"damage"},"remaining":2},{"tile":{"id":"45-EbI8thaUszH0kxRvxz","name":"alley gaz tile","top":true,"bottom":true,"type":"gaz"},"remaining":1},{"tile":{"id":"S7Z47I_FFW-ZSumM8aiJ5","name":"edge gaz tile","top":true,"right":true,"bottom":true,"type":"gaz"},"remaining":2},{"tile":{"id":"8d2V4rOPI-kIkAx5s583p","name":"edge landslide tile 3 & 5","top":true,"right":true,"bottom":true,"type":"landslide","dices":[3,5]},"remaining":1},{"tile":{"id":"AeEQazY4QCBBb3Kt_yQuU","name":"edge landslide tile 4 & 5","top":true,"right":true,"bottom":true,"type":"landslide","dices":[4,5]},"remaining":1},{"tile":{"id":"aYbJvk_Vrwx0OFFMBmn22","name":"edge landslide tile 1 & 3","top":true,"right":true,"bottom":true,"type":"landslide","dices":[1,3]},"remaining":1},{"tile":{"id":"HwfQuoy7wU70-8cXVzqN9","name":"corner landslide tile 1 & 2","top":true,"right":true,"type":"landslide","dices":[1,2]},"remaining":1},{"tile":{"id":"7LxK3CZ1NHamA7-N3LodL","name":"edge landslide tile 4 & 6","top":true,"right":true,"bottom":true,"type":"landslide","dices":[4,6]},"remaining":1},{"tile":{"id":"9EnpHW_Gd2I7y_OLVrcCy","name":"edge landslide tile 2 & 5","top":true,"right":true,"bottom":true,"type":"landslide","dices":[2,5]},"remaining":2},{"tile":{"id":"L0nblDzgW3Q4P6-zffoqG","name":"corner landslide tile 1 & 5","top":true,"right":true,"type":"landslide","dices":[1,5]},"remaining":1},{"tile":{"id":"_wbDKHo0T69uSO1qclmqj","name":"corner enemy tile","top":true,"right":true,"type":"enemy"},"remaining":2}]}},{"type":"@players>init","payload":[{"type":"geologist","health":3,"strength":3,"skills":[{"type":"intuition","perGame":null,"perTurn":null,"cost":0},{"type":"clear","perGame":null,"perTurn":null,"cost":1}],"archetype":{"type":"geologist","health":3,"strength":3,"skills":[{"type":"intuition","perGame":null,"perTurn":null,"cost":0},{"type":"clear","perGame":null,"perTurn":null,"cost":1}]},"name":"geologist"},{"type":"scoot","health":3,"strength":2,"skills":[{"type":"guide","cost":0,"perGame":3,"perTurn":null},{"type":"furtivity","cost":0,"perGame":null,"perTurn":null}],"archetype":{"type":"scoot","health":3,"strength":2,"skills":[{"type":"guide","cost":0,"perGame":3,"perTurn":null},{"type":"furtivity","cost":0,"perGame":null,"perTurn":null}]},"name":"scoot"},{"type":"diver","health":3,"strength":1,"skills":[{"type":"dive","cost":2,"perGame":null,"perTurn":null},{"type":"amphibious","cost":0,"perGame":null,"perTurn":null}],"archetype":{"type":"diver","health":3,"strength":1,"skills":[{"type":"dive","cost":2,"perGame":null,"perTurn":null},{"type":"amphibious","cost":0,"perGame":null,"perTurn":null}]},"name":"diver"}]},{"type":"@players>look","payload":{"playerId":"geologist","x":1,"y":0,"cost":1}},{"type":"@players>drop","payload":{"playerId":"geologist","cost":0}},{"type":"@players>move","payload":{"playerId":"geologist","x":1,"y":0,"cost":1}},{"type":"@players>excess","payload":{"playerId":"geologist","actionOnSuccess":{"type":"@players>look","payload":{"playerId":"geologist","x":2,"y":0,"cost":1}}}},{"type":"@dices>roll","payload":{"min":4,"playerId":"geologist","actionOnFail":{"type":"@players>damage","payload":{"damage":1,"from":{"type":"@players>excess","payload":{"playerId":"geologist","actionOnSuccess":{"type":"@players>look","payload":{"playerId":"geologist","x":2,"y":0,"cost":1}}}},"playerId":"geologist"}},"actionOnSuccess":{"type":"@players>look","payload":{"playerId":"geologist","x":2,"y":0,"cost":1}}}},{"type":"@dices>rolled","payload":{"min":4,"playerId":"geologist","actionOnFail":{"type":"@players>damage","payload":{"damage":1,"from":{"type":"@players>excess","payload":{"playerId":"geologist","actionOnSuccess":{"type":"@players>look","payload":{"playerId":"geologist","x":2,"y":0,"cost":1}}}},"playerId":"geologist"}},"actionOnSuccess":{"type":"@players>look","payload":{"playerId":"geologist","x":2,"y":0,"cost":1}},"value":4}},{"type":"@players>look","payload":{"playerId":"geologist","x":2,"y":0,"cost":1}},{"type":"@players>rotate","payload":{"playerId":"geologist","rotation":90,"cost":0}},{"type":"@players>drop","payload":{"playerId":"geologist","cost":0}},{"type":"@players>pass"},{"type":"@players>look","payload":{"playerId":"scoot","x":0,"y":1,"cost":1}},{"type":"@players>drop","payload":{"playerId":"scoot","cost":0}},{"type":"@players>move","payload":{"playerId":"scoot","x":0,"y":1,"cost":1}},{"type":"@players>excess","payload":{"playerId":"scoot","actionOnSuccess":{"type":"@players>look","payload":{"playerId":"scoot","x":1,"y":1,"cost":1}}}},{"type":"@dices>roll","payload":{"min":4,"playerId":"scoot","actionOnFail":{"type":"@players>damage","payload":{"damage":1,"from":{"type":"@players>excess","payload":{"playerId":"scoot","actionOnSuccess":{"type":"@players>look","payload":{"playerId":"scoot","x":1,"y":1,"cost":1}}}},"playerId":"scoot"}},"actionOnSuccess":{"type":"@players>look","payload":{"playerId":"scoot","x":1,"y":1,"cost":1}}}},{"type":"@dices>rolled","payload":{"min":4,"playerId":"scoot","actionOnFail":{"type":"@players>damage","payload":{"damage":1,"from":{"type":"@players>excess","payload":{"playerId":"scoot","actionOnSuccess":{"type":"@players>look","payload":{"playerId":"scoot","x":1,"y":1,"cost":1}}}},"playerId":"scoot"}},"actionOnSuccess":{"type":"@players>look","payload":{"playerId":"scoot","x":1,"y":1,"cost":1}},"value":2}},{"type":"@players>damage","payload":{"damage":1,"from":{"type":"@players>excess","payload":{"playerId":"scoot","actionOnSuccess":{"type":"@players>look","payload":{"playerId":"scoot","x":1,"y":1,"cost":1}}}},"playerId":"scoot"}},{"type":"@players>pass"},{"type":"@players>look","payload":{"playerId":"diver","x":-1,"y":0,"cost":1}}]}}',
)

describe('findActionsOnCell', () => {
  it('should work', () => {
    const player = STATE.players.find(({ id }) => id === 'diver')

    const newGrid = [...STATE.grid, STATE.playerActions.tile]
    const cells = getWrappingCells(newGrid)
    cells.forEach(findActionsOnCell(player, player, newGrid))
  })
})
