{"ast":null,"code":"var _jsxFileName = \"/home/fabienjuif/work/subterra/packages/ui/src/screens/prepare/prepare.jsx\";\nimport React, { useState, useCallback } from 'react';\nimport cn from 'classnames';\nimport { archetypes as archetypesData, cards as cardsData } from '@subterra/data';\nimport { dices } from '@subterra/engine';\nimport Archetype from './archetype';\nimport classes from './prepare.module.scss';\n\nconst Prepare = ({\n  onStart\n}) => {\n  const [archetypesPool, setArchetypesPool] = useState(archetypesData);\n  const [archetypes, setArchetypes] = useState([]);\n  const innerOnStart = useCallback(() => {\n    const cards = [...Array.from({\n      length: 10\n    }).map(() => dices.getRandomInArray(cardsData.slice(1))), cardsData[0]];\n    const dices = Array.from({\n      length: 5000\n    }).map(() => dices.roll6());\n    onStart({\n      cards,\n      dices,\n      players: archetypes.map(archetype => ({ ...archetype,\n        archetype,\n        name: archetype.type\n      }))\n    });\n  }, [onStart, archetypes]);\n  const onAddArchetype = useCallback(type => {\n    setArchetypesPool(old => old.filter(a => a.type !== type));\n    setArchetypes(old => [...old, archetypesData.find(a => a.type === type)]);\n  }, []);\n  const onRemoveArchetype = useCallback(type => {\n    setArchetypes(old => old.filter(a => a.type !== type));\n    setArchetypesPool(old => [...old, archetypesData.find(a => a.type === type)]);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, \"Prepare\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('players', classes.players),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, \"Players\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('body', classes.body),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('side', classes.side),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"archetypes pool\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: cn('list', classes.list),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, archetypesPool.map(({\n    type,\n    ...archetype\n  }) => /*#__PURE__*/React.createElement(\"li\", {\n    key: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Archetype, Object.assign({}, archetype, {\n    onClick: () => onAddArchetype(type),\n    className: cn('archetype', classes.archetype),\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 19\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('side', classes.side),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \"You choose\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: cn('list', classes.list),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, archetypes.map(({\n    type,\n    ...archetype\n  }) => /*#__PURE__*/React.createElement(\"li\", {\n    key: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Archetype, Object.assign({}, archetype, {\n    onClick: () => onRemoveArchetype(type),\n    className: cn('archetype', classes.archetype),\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: innerOnStart,\n    disabled: archetypes.length < 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, \"start\"));\n};\n\nexport default Prepare;","map":{"version":3,"sources":["/home/fabienjuif/work/subterra/packages/ui/src/screens/prepare/prepare.jsx"],"names":["React","useState","useCallback","cn","archetypes","archetypesData","cards","cardsData","dices","Archetype","classes","Prepare","onStart","archetypesPool","setArchetypesPool","setArchetypes","innerOnStart","Array","from","length","map","getRandomInArray","slice","roll6","players","archetype","name","type","onAddArchetype","old","filter","a","find","onRemoveArchetype","body","side","list"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react'\nimport cn from 'classnames'\nimport {\n  archetypes as archetypesData,\n  cards as cardsData,\n} from '@subterra/data'\nimport { dices } from '@subterra/engine'\nimport Archetype from './archetype'\nimport classes from './prepare.module.scss'\n\nconst Prepare = ({ onStart }) => {\n  const [archetypesPool, setArchetypesPool] = useState(archetypesData)\n  const [archetypes, setArchetypes] = useState([])\n\n  const innerOnStart = useCallback(() => {\n    const cards = [\n      ...Array.from({ length: 10 }).map(() =>\n        dices.getRandomInArray(cardsData.slice(1)),\n      ),\n      cardsData[0],\n    ]\n\n    const dices = Array.from({ length: 5000 }).map(() => dices.roll6())\n\n    onStart({\n      cards,\n      dices,\n      players: archetypes.map((archetype) => ({\n        ...archetype,\n        archetype,\n        name: archetype.type,\n      })),\n    })\n  }, [onStart, archetypes])\n\n  const onAddArchetype = useCallback((type) => {\n    setArchetypesPool((old) => old.filter((a) => a.type !== type))\n    setArchetypes((old) => [\n      ...old,\n      archetypesData.find((a) => a.type === type),\n    ])\n  }, [])\n\n  const onRemoveArchetype = useCallback((type) => {\n    setArchetypes((old) => old.filter((a) => a.type !== type))\n    setArchetypesPool((old) => [\n      ...old,\n      archetypesData.find((a) => a.type === type),\n    ])\n  }, [])\n\n  return (\n    <div>\n      <h1>Prepare</h1>\n      <div className={cn('players', classes.players)}>\n        <h2>Players</h2>\n        <div className={cn('body', classes.body)}>\n          <div className={cn('side', classes.side)}>\n            <h3>archetypes pool</h3>\n            <ul className={cn('list', classes.list)}>\n              {archetypesPool.map(({ type, ...archetype }) => (\n                <li key={type}>\n                  <Archetype\n                    {...archetype}\n                    onClick={() => onAddArchetype(type)}\n                    className={cn('archetype', classes.archetype)}\n                    type={type}\n                  />\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div className={cn('side', classes.side)}>\n            <h3>You choose</h3>\n            <ul className={cn('list', classes.list)}>\n              {archetypes.map(({ type, ...archetype }) => (\n                <li key={type}>\n                  <Archetype\n                    {...archetype}\n                    onClick={() => onRemoveArchetype(type)}\n                    className={cn('archetype', classes.archetype)}\n                    type={type}\n                  />\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n      <button onClick={innerOnStart} disabled={archetypes.length < 3}>\n        start\n      </button>\n    </div>\n  )\n}\n\nexport default Prepare\n"]},"metadata":{},"sourceType":"module"}