{"ast":null,"code":"var _jsxFileName = \"/home/fabienjuif/work/subterra/packages/ui/src/screens/prepare/prepare.jsx\";\nimport React, { useState, useCallback } from 'react';\nimport cn from 'classnames';\nimport archetypesData from '../../utils/archetypes';\nimport cardsData from '../../utils/cards';\nimport { getRandomInArray, roll6 } from '../../utils/dices';\nimport Archetype from './archetype';\nimport classes from './prepare.module.scss';\n\nconst Prepare = ({\n  onStart\n}) => {\n  const [archetypesPool, setArchetypesPool] = useState(archetypesData);\n  const [archetypes, setArchetypes] = useState([]);\n  const innerOnStart = useCallback(() => {\n    const cards = [...Array.from({\n      length: 10\n    }).map(() => getRandomInArray(cardsData.slice(1))), cardsData[0]];\n    const dices = Array.from({\n      length: 5000\n    }).map(() => roll6());\n    onStart({\n      cards,\n      dices,\n      players: archetypes.map(archetype => ({ ...archetype,\n        archetype,\n        name: archetype.type\n      }))\n    });\n  }, [onStart, archetypes]);\n  const onAddArchetype = useCallback(type => {\n    setArchetypesPool(old => old.filter(a => a.type !== type));\n    setArchetypes(old => [...old, archetypesData.find(a => a.type === type)]);\n  }, []);\n  const onRemoveArchetype = useCallback(type => {\n    setArchetypes(old => old.filter(a => a.type !== type));\n    setArchetypesPool(old => [...old, archetypesData.find(a => a.type === type)]);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, \"Prepare\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('players', classes.players),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Players\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('body', classes.body),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('side', classes.side),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, \"archetypes pool\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: cn('list', classes.list),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, archetypesPool.map(({\n    type,\n    ...archetype\n  }) => /*#__PURE__*/React.createElement(\"li\", {\n    key: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Archetype, Object.assign({}, archetype, {\n    onClick: () => onAddArchetype(type),\n    className: cn('archetype', classes.archetype),\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('side', classes.side),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"You choose\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: cn('list', classes.list),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, archetypes.map(({\n    type,\n    ...archetype\n  }) => /*#__PURE__*/React.createElement(\"li\", {\n    key: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Archetype, Object.assign({}, archetype, {\n    onClick: () => onRemoveArchetype(type),\n    className: cn('archetype', classes.archetype),\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: innerOnStart,\n    disabled: archetypes.length < 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, \"start\"));\n};\n\nexport default Prepare;","map":{"version":3,"sources":["/home/fabienjuif/work/subterra/packages/ui/src/screens/prepare/prepare.jsx"],"names":["React","useState","useCallback","cn","archetypesData","cardsData","getRandomInArray","roll6","Archetype","classes","Prepare","onStart","archetypesPool","setArchetypesPool","archetypes","setArchetypes","innerOnStart","cards","Array","from","length","map","slice","dices","players","archetype","name","type","onAddArchetype","old","filter","a","find","onRemoveArchetype","body","side","list"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,QAA6C,OAA7C;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,cAAP,MAA2B,wBAA3B;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,SAASC,gBAAT,EAA2BC,KAA3B,QAAwC,mBAAxC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,OAAP,MAAoB,uBAApB;;AAEA,MAAMC,OAAO,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAC/B,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCZ,QAAQ,CAACG,cAAD,CAApD;AACA,QAAM,CAACU,UAAD,EAAaC,aAAb,IAA8Bd,QAAQ,CAAC,EAAD,CAA5C;AAEA,QAAMe,YAAY,GAAGd,WAAW,CAAC,MAAM;AACrC,UAAMe,KAAK,GAAG,CACZ,GAAGC,KAAK,CAACC,IAAN,CAAW;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAX,EAA2BC,GAA3B,CAA+B,MAChCf,gBAAgB,CAACD,SAAS,CAACiB,KAAV,CAAgB,CAAhB,CAAD,CADf,CADS,EAIZjB,SAAS,CAAC,CAAD,CAJG,CAAd;AAOA,UAAMkB,KAAK,GAAGL,KAAK,CAACC,IAAN,CAAW;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAX,EAA6BC,GAA7B,CAAiC,MAAMd,KAAK,EAA5C,CAAd;AAEAI,IAAAA,OAAO,CAAC;AACNM,MAAAA,KADM;AAENM,MAAAA,KAFM;AAGNC,MAAAA,OAAO,EAAEV,UAAU,CAACO,GAAX,CAAgBI,SAAD,KAAgB,EACtC,GAAGA,SADmC;AAEtCA,QAAAA,SAFsC;AAGtCC,QAAAA,IAAI,EAAED,SAAS,CAACE;AAHsB,OAAhB,CAAf;AAHH,KAAD,CAAP;AASD,GAnB+B,EAmB7B,CAAChB,OAAD,EAAUG,UAAV,CAnB6B,CAAhC;AAqBA,QAAMc,cAAc,GAAG1B,WAAW,CAAEyB,IAAD,IAAU;AAC3Cd,IAAAA,iBAAiB,CAAEgB,GAAD,IAASA,GAAG,CAACC,MAAJ,CAAYC,CAAD,IAAOA,CAAC,CAACJ,IAAF,KAAWA,IAA7B,CAAV,CAAjB;AACAZ,IAAAA,aAAa,CAAEc,GAAD,IAAS,CACrB,GAAGA,GADkB,EAErBzB,cAAc,CAAC4B,IAAf,CAAqBD,CAAD,IAAOA,CAAC,CAACJ,IAAF,KAAWA,IAAtC,CAFqB,CAAV,CAAb;AAID,GANiC,EAM/B,EAN+B,CAAlC;AAQA,QAAMM,iBAAiB,GAAG/B,WAAW,CAAEyB,IAAD,IAAU;AAC9CZ,IAAAA,aAAa,CAAEc,GAAD,IAASA,GAAG,CAACC,MAAJ,CAAYC,CAAD,IAAOA,CAAC,CAACJ,IAAF,KAAWA,IAA7B,CAAV,CAAb;AACAd,IAAAA,iBAAiB,CAAEgB,GAAD,IAAS,CACzB,GAAGA,GADsB,EAEzBzB,cAAc,CAAC4B,IAAf,CAAqBD,CAAD,IAAOA,CAAC,CAACJ,IAAF,KAAWA,IAAtC,CAFyB,CAAV,CAAjB;AAID,GANoC,EAMlC,EANkC,CAArC;AAQA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAK,IAAA,SAAS,EAAExB,EAAE,CAAC,SAAD,EAAYM,OAAO,CAACe,OAApB,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAK,IAAA,SAAS,EAAErB,EAAE,CAAC,MAAD,EAASM,OAAO,CAACyB,IAAjB,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAE/B,EAAE,CAAC,MAAD,EAASM,OAAO,CAAC0B,IAAjB,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAI,IAAA,SAAS,EAAEhC,EAAE,CAAC,MAAD,EAASM,OAAO,CAAC2B,IAAjB,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGxB,cAAc,CAACS,GAAf,CAAmB,CAAC;AAAEM,IAAAA,IAAF;AAAQ,OAAGF;AAAX,GAAD,kBAClB;AAAI,IAAA,GAAG,EAAEE,IAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD,oBACMF,SADN;AAEE,IAAA,OAAO,EAAE,MAAMG,cAAc,CAACD,IAAD,CAF/B;AAGE,IAAA,SAAS,EAAExB,EAAE,CAAC,WAAD,EAAcM,OAAO,CAACgB,SAAtB,CAHf;AAIE,IAAA,IAAI,EAAEE,IAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,CADD,CADH,CAFF,CADF,eAiBE;AAAK,IAAA,SAAS,EAAExB,EAAE,CAAC,MAAD,EAASM,OAAO,CAAC0B,IAAjB,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAI,IAAA,SAAS,EAAEhC,EAAE,CAAC,MAAD,EAASM,OAAO,CAAC2B,IAAjB,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGtB,UAAU,CAACO,GAAX,CAAe,CAAC;AAAEM,IAAAA,IAAF;AAAQ,OAAGF;AAAX,GAAD,kBACd;AAAI,IAAA,GAAG,EAAEE,IAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD,oBACMF,SADN;AAEE,IAAA,OAAO,EAAE,MAAMQ,iBAAiB,CAACN,IAAD,CAFlC;AAGE,IAAA,SAAS,EAAExB,EAAE,CAAC,WAAD,EAAcM,OAAO,CAACgB,SAAtB,CAHf;AAIE,IAAA,IAAI,EAAEE,IAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,CADD,CADH,CAFF,CAjBF,CAFF,CAFF,eAsCE;AAAQ,IAAA,OAAO,EAAEX,YAAjB;AAA+B,IAAA,QAAQ,EAAEF,UAAU,CAACM,MAAX,GAAoB,CAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAtCF,CADF;AA4CD,CArFD;;AAuFA,eAAeV,OAAf","sourcesContent":["import React, { useState, useCallback } from 'react'\nimport cn from 'classnames'\nimport archetypesData from '../../utils/archetypes'\nimport cardsData from '../../utils/cards'\nimport { getRandomInArray, roll6 } from '../../utils/dices'\nimport Archetype from './archetype'\nimport classes from './prepare.module.scss'\n\nconst Prepare = ({ onStart }) => {\n  const [archetypesPool, setArchetypesPool] = useState(archetypesData)\n  const [archetypes, setArchetypes] = useState([])\n\n  const innerOnStart = useCallback(() => {\n    const cards = [\n      ...Array.from({ length: 10 }).map(() =>\n        getRandomInArray(cardsData.slice(1)),\n      ),\n      cardsData[0],\n    ]\n\n    const dices = Array.from({ length: 5000 }).map(() => roll6())\n\n    onStart({\n      cards,\n      dices,\n      players: archetypes.map((archetype) => ({\n        ...archetype,\n        archetype,\n        name: archetype.type,\n      })),\n    })\n  }, [onStart, archetypes])\n\n  const onAddArchetype = useCallback((type) => {\n    setArchetypesPool((old) => old.filter((a) => a.type !== type))\n    setArchetypes((old) => [\n      ...old,\n      archetypesData.find((a) => a.type === type),\n    ])\n  }, [])\n\n  const onRemoveArchetype = useCallback((type) => {\n    setArchetypes((old) => old.filter((a) => a.type !== type))\n    setArchetypesPool((old) => [\n      ...old,\n      archetypesData.find((a) => a.type === type),\n    ])\n  }, [])\n\n  return (\n    <div>\n      <h1>Prepare</h1>\n      <div className={cn('players', classes.players)}>\n        <h2>Players</h2>\n        <div className={cn('body', classes.body)}>\n          <div className={cn('side', classes.side)}>\n            <h3>archetypes pool</h3>\n            <ul className={cn('list', classes.list)}>\n              {archetypesPool.map(({ type, ...archetype }) => (\n                <li key={type}>\n                  <Archetype\n                    {...archetype}\n                    onClick={() => onAddArchetype(type)}\n                    className={cn('archetype', classes.archetype)}\n                    type={type}\n                  />\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div className={cn('side', classes.side)}>\n            <h3>You choose</h3>\n            <ul className={cn('list', classes.list)}>\n              {archetypes.map(({ type, ...archetype }) => (\n                <li key={type}>\n                  <Archetype\n                    {...archetype}\n                    onClick={() => onRemoveArchetype(type)}\n                    className={cn('archetype', classes.archetype)}\n                    type={type}\n                  />\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n      <button onClick={innerOnStart} disabled={archetypes.length < 3}>\n        start\n      </button>\n    </div>\n  )\n}\n\nexport default Prepare\n"]},"metadata":{},"sourceType":"module"}