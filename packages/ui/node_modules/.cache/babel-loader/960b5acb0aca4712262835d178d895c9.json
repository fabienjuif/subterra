{"ast":null,"code":"var _jsxFileName = \"/home/fabienjuif/work/subterra/packages/ui/src/components/movableGrid.jsx\";\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport cn from 'classnames';\nimport classes from './movableGrid.module.scss';\n\nconst MovableGrid = ({\n  className,\n  children\n}) => {\n  const moving = useRef(false);\n  const [translateX, setTranslateX] = useState(0);\n  const [translateY, setTranslateY] = useState(0);\n  const [scale, setScale] = useState(1);\n  useEffect(() => {\n    const onMouseMove = e => {\n      if (!moving.current) return;\n      setTranslateX(old => old + e.movementX);\n      setTranslateY(old => old + e.movementY);\n    };\n\n    const onMouseUp = e => {\n      moving.current = false;\n    };\n\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []);\n  const onMouseDown = useCallback(() => {\n    moving.current = true;\n  }, []);\n  const onWheel = useCallback(e => {\n    const {\n      deltaY\n    } = e;\n    setScale(old => Math.max(0.2, old - deltaY * 0.05));\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('movable-grid', className, classes.movableGrid),\n    onWheel: onWheel,\n    onMouseDown: onMouseDown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      transform: `translate(${translateX}px, ${translateY}px) scale(${scale})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, children), /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('shadow', classes.shadow),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default MovableGrid;","map":{"version":3,"sources":["/home/fabienjuif/work/subterra/packages/ui/src/components/movableGrid.jsx"],"names":["React","useState","useCallback","useEffect","useRef","cn","classes","MovableGrid","className","children","moving","translateX","setTranslateX","translateY","setTranslateY","scale","setScale","onMouseMove","e","current","old","movementX","movementY","onMouseUp","window","addEventListener","removeEventListener","onMouseDown","onWheel","deltaY","Math","max","movableGrid","transform","shadow"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,SAAvC,EAAkDC,MAAlD,QAAgE,OAAhE;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,OAAP,MAAoB,2BAApB;;AAEA,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,CAAD,KAA6B;AAC/C,QAAMC,MAAM,GAAGN,MAAM,CAAC,KAAD,CAArB;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BX,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,CAAD,CAAlC;AAEAE,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMc,WAAW,GAAIC,CAAD,IAAO;AACzB,UAAI,CAACR,MAAM,CAACS,OAAZ,EAAqB;AACrBP,MAAAA,aAAa,CAAEQ,GAAD,IAASA,GAAG,GAAGF,CAAC,CAACG,SAAlB,CAAb;AACAP,MAAAA,aAAa,CAAEM,GAAD,IAASA,GAAG,GAAGF,CAAC,CAACI,SAAlB,CAAb;AACD,KAJD;;AAMA,UAAMC,SAAS,GAAIL,CAAD,IAAO;AACvBR,MAAAA,MAAM,CAACS,OAAP,GAAiB,KAAjB;AACD,KAFD;;AAIAK,IAAAA,MAAM,CAACC,gBAAP,CAAwB,WAAxB,EAAqCR,WAArC;AACAO,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCF,SAAnC;AAEA,WAAO,MAAM;AACXC,MAAAA,MAAM,CAACE,mBAAP,CAA2B,WAA3B,EAAwCT,WAAxC;AACAO,MAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCH,SAAtC;AACD,KAHD;AAID,GAlBQ,EAkBN,EAlBM,CAAT;AAoBA,QAAMI,WAAW,GAAGzB,WAAW,CAAC,MAAM;AACpCQ,IAAAA,MAAM,CAACS,OAAP,GAAiB,IAAjB;AACD,GAF8B,EAE5B,EAF4B,CAA/B;AAIA,QAAMS,OAAO,GAAG1B,WAAW,CAAEgB,CAAD,IAAO;AACjC,UAAM;AAAEW,MAAAA;AAAF,QAAaX,CAAnB;AAEAF,IAAAA,QAAQ,CAAEI,GAAD,IAASU,IAAI,CAACC,GAAL,CAAS,GAAT,EAAcX,GAAG,GAAGS,MAAM,GAAG,IAA7B,CAAV,CAAR;AACD,GAJ0B,EAIxB,EAJwB,CAA3B;AAMA,sBACE;AACE,IAAA,SAAS,EAAExB,EAAE,CAAC,cAAD,EAAiBG,SAAjB,EAA4BF,OAAO,CAAC0B,WAApC,CADf;AAEE,IAAA,OAAO,EAAEJ,OAFX;AAGE,IAAA,WAAW,EAAED,WAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE;AACE,IAAA,KAAK,EAAE;AACLM,MAAAA,SAAS,EAAG,aAAYtB,UAAW,OAAME,UAAW,aAAYE,KAAM;AADjE,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGN,QALH,CALF,eAaE;AAAK,IAAA,SAAS,EAAEJ,EAAE,CAAC,QAAD,EAAWC,OAAO,CAAC4B,MAAnB,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbF,CADF;AAiBD,CArDD;;AAuDA,eAAe3B,WAAf","sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react'\nimport cn from 'classnames'\nimport classes from './movableGrid.module.scss'\n\nconst MovableGrid = ({ className, children }) => {\n  const moving = useRef(false)\n  const [translateX, setTranslateX] = useState(0)\n  const [translateY, setTranslateY] = useState(0)\n  const [scale, setScale] = useState(1)\n\n  useEffect(() => {\n    const onMouseMove = (e) => {\n      if (!moving.current) return\n      setTranslateX((old) => old + e.movementX)\n      setTranslateY((old) => old + e.movementY)\n    }\n\n    const onMouseUp = (e) => {\n      moving.current = false\n    }\n\n    window.addEventListener('mousemove', onMouseMove)\n    window.addEventListener('mouseup', onMouseUp)\n\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove)\n      window.removeEventListener('mouseup', onMouseUp)\n    }\n  }, [])\n\n  const onMouseDown = useCallback(() => {\n    moving.current = true\n  }, [])\n\n  const onWheel = useCallback((e) => {\n    const { deltaY } = e\n\n    setScale((old) => Math.max(0.2, old - deltaY * 0.05))\n  }, [])\n\n  return (\n    <div\n      className={cn('movable-grid', className, classes.movableGrid)}\n      onWheel={onWheel}\n      onMouseDown={onMouseDown}\n    >\n      <div\n        style={{\n          transform: `translate(${translateX}px, ${translateY}px) scale(${scale})`,\n        }}\n      >\n        {children}\n      </div>\n\n      <div className={cn('shadow', classes.shadow)} />\n    </div>\n  )\n}\n\nexport default MovableGrid\n"]},"metadata":{},"sourceType":"module"}